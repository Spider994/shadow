<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Red Leaf Eatery — Menu & Order</title>
  <meta name="description" content="Red Leaf Eatery — fresh flavours, cozy vibes. Order online or visit us today." />

  <style>
    :root{
      --accent: #b80b12;
      --accent-dark: #143e1f;
      --muted: rgba(0,0,0,0.45);
      --glass: rgba(255,255,255,0.08);
      --max-width: 1200px;
      --radius: 12px;
      --shadow: 0 8px 30px rgba(0,0,0,0.35);
      --font-sans: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --font-serif: Georgia, "Times New Roman", serif;

      /* interactive menu palette */
      --green: #6aa84f;
      --bg: #f7f6ea;
      --card: #ffffff;
      --muted-2: #777;
      --glass-2: rgba(255,255,255,0.85);
    }

    /* Reset-ish */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#root{height:100%}
    body{
      font-family:var(--font-sans);
      color: #222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
      background: linear-gradient(180deg,#f7f6ea,#f1f4d1);
    }

    /* Top hero (full-bleed) */
    .hero {
      min-height: 66vh;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
      background-color: #ffffff; /* fallback */
      background-image:
        linear-gradient(to bottom right, rgba(5,20,10,0.45), rgba(5,20,10,0.25)),
        url("Redleaf.jpeg");
      background-size: cover;
      background-position: center 20%;
      background-repeat: no-repeat;
      text-align: center;
      padding: 48px 20px;
      color: #fff;
    }

    .hero__panel{
      width: min(100%, var(--max-width));
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      align-items:center;
      justify-items:center;
      padding:28px;
      border-radius: 16px;
      backdrop-filter: blur(6px) saturate(1.05);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      box-shadow: var(--shadow);
    }

    .brand { display:flex; gap:18px; align-items:center; justify-content:center; }
    .brand__logo {
      width:96px; height:96px;
      background: url("Redleaf.jpeg") center/cover no-repeat;
      border-radius:50%;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35) inset;
      border: 3px solid rgba(255,255,255,0.12);
      flex:0 0 96px;
    }
    .brand__title h1{ font-size: clamp(28px, 4.6vw, 44px); margin-bottom:4px; color:#fff; letter-spacing:-0.02em; }
    .brand__title p{ font-size: clamp(12px, 1.8vw, 16px); margin:0; color: rgba(87, 82, 82, 0.95); font-weight:500; }

    .hero__headline{ font-family: var(--font-serif); font-size: clamp(22px, 3.6vw, 36px); color:#fff; margin-top:6px; text-shadow: 0 4px 18px rgba(0,0,0,0.6); }
    .hero__sub{ color: rgba(255,255,255,0.92); max-width: 860px; font-size: clamp(14px, 1.6vw, 18px); margin-top: 8px; }

    .cta-row{ display:flex; gap:12px; margin-top:16px; flex-wrap:wrap; justify-content:center; }
    .btn{
      display:inline-flex; align-items:center; gap:10px; padding:10px 18px; border-radius:10px; text-decoration:none; font-weight:600; cursor:pointer; border: none;
      transition: transform .15s ease, box-shadow .15s ease; box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); color: #fff; min-height:44px;
    }
    .btn:active{ transform:translateY(1px) }
    .btn--order { background: linear-gradient(180deg,var(--accent), #b12a2a); color: #fff; }
    .btn--menu { background: transparent; border: 2px solid rgba(255,255,255,0.18); }

    .chips{ display:flex; gap:10px; margin-top: 10px; flex-wrap:wrap; justify-content:center; }
    .chip{ padding:8px 12px; background:var(--glass); border-radius: 999px; font-size:13px; color:#131212; border: 1px solid rgba(255,255,255,0.06); }

    .site-header{ position:absolute; top:18px; left:18px; right:18px; display:flex; align-items:center; justify-content:space-between; gap:16px; z-index:8; }
    .nav-left{display:flex;align-items:center;gap:12px}
    .nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#141414;}
    .nav-brand img{width:44px;height:44px;border-radius:10px;object-fit:cover}
    .nav-actions{display:flex;gap:8px;align-items:center}

    @media (min-width:880px){
      .hero__panel{ grid-template-columns: 1fr 420px; align-items:center; padding:36px; }
      .cta-row{ justify-content:flex-start }
      .chips{ justify-content:flex-start }
      .brand__title{text-align:left}
    }

    /* --- Interactive menu & layout (below hero) --- */
    .page-wrap{ max-width:1100px; margin: 22px auto 120px; padding: 0 18px; display:grid; grid-template-columns: 1fr; gap:18px; }/** Behind items bar **/

    .container{ max-width:1100px; margin: 0 auto; padding:20px; display:grid; grid-template-columns:260px 1fr; gap:20px; align-items:start; }
    .sidebar{ background:var(--glass-2); padding:16px; border-radius:12px; box-shadow:0 6px 18px rgba(60,60,60,0.08); position:sticky; top:20px; height:fit-content }
    .logo{ display:flex; gap:12px; align-items:center }
    .logo img{ width:58px; height:58px; border-radius:10px; object-fit:cover }
    .brand{ font-weight:700; color:var(--green); font-size:18px }
    .tel{ font-size:13px; color:var(--muted-2); margin-top:6px }
    .search{ margin-top:12px }
    .search input{ width:100%; padding:10px; border-radius:8px; border:1px solid #e0e0d8; background:white }
    .cats{ margin-top:14px; display:flex; flex-direction:column; gap:8px }
    .cat{ padding:10px; border-radius:8px; cursor:pointer; border:1px solid transparent }
    .cat.active{ background:var(--green); color:rgb(44, 40, 40); font-weight:600 }
    .cat:hover{ border-color:#e2e2d2 }

    .main{ display:flex; flex-direction:column; gap:14px }
    .hero-banner{ background-image:url('Redleaf.jpeg'); background-size:cover; background-position:center; height:140px; border-radius:12px; position:relative; overflow:hidden; display:flex; align-items:flex-end; padding:18px;  }/** red leaf logo behing the menu **/
    .hero-banner .title{ font-size:22px; font-weight:800; text-shadow:0 3px 10px rgba(0,0,0,0.35) }
    .controls{ display:flex; gap:10px; align-items:center }

    .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:14px }
    .card{ background:var(--card); padding:12px; border-radius:12px; box-shadow:0 6px 18px rgba(30,30,30,0.06); display:flex; gap:12px; align-items:center }
    .thumb{ width:84px; height:84px; border-radius:10px; flex-shrink:0; object-fit:cover; background:#555252; border:1px solid #eee }
    .meta h4{ margin:0 0 6px 0; font-size:16px }
    .meta p{ margin:0; font-size:13px; color:var(--muted-2) }
    .price-row{ display:flex; gap:10px; align-items:center; margin-top:8px }
    .price{ font-weight:700; color:var(--accent) }
    .btn.small{ padding:8px 10px; border-radius:8px; border:none; cursor:pointer }

    /* Cart / order spot */
    .cart{ position:fixed; right:18px; top:18px; width:340px; background:linear-gradient(180deg,rgba(255,255,255,0.96),white); border-radius:12px; padding:12px; box-shadow:0 20px 50px rgba(30,30,30,0.15); max-height:80vh; overflow:auto; z-index:90 }
    .cart h3{ margin:0 0 8px 0 }
    .cart-list{ display:flex; flex-direction:column; gap:8px }
    .cart-item{ display:flex; gap:8px; align-items:center }
    .cart-item img{ width:44px; height:44px; border-radius:8px; object-fit:cover }
    .qty{ display:flex; gap:6px; align-items:center }
    .qty button{ padding:6px; border-radius:6px; border:1px solid #ddd; background:rgb(10, 10, 10); cursor:pointer }
    .checkout{ margin-top:10px; display:flex; justify-content:space-between; align-items:center }
    .total{ font-weight:800; font-size:18px }

    /* Modal */
    .modal-backdrop{ position:fixed; left:0; top:0; right:0; bottom:0; background:rgba(179, 21, 21, 0.45); display:flex; align-items:center; justify-content:center; z-index:200 }
    .modal{ width:420px; background:white; border-radius:12px; padding:16px }
    .sizes{ display:flex; gap:8px; margin-top:10px }
    .sizes button{ padding:8px 10px; border-radius:8px; border:1px solid #1b1a1a; background:#fafafa; cursor:pointer }
    .sizes button.active{ background:var(--green); color:rgb(22, 20, 20); border-color:var(--green) }

    /* order spot form */
    #orderSpot{ background: rgb(26, 24, 24); border-radius:12px; padding:18px; box-shadow:0 8px 30px rgba(0,0,0,0.06); }
    #orderSpot h3{ margin:0 0 8px 0 }
    #orderSpot label{ display:block; font-size:13px; margin-top:8px; color:#ece8e8 }
    #orderSpot input, #orderSpot textarea{ width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #773f3f; }

    /* responsive */
    @media (max-width:900px){
      .container{ grid-template-columns:1fr; padding:12px }
      .sidebar{ position:relative; display:flex; flex-direction:row; gap:10px; align-items:center }
      .cart{ display:none }
    }

  </style>
</head>
<body>
  <!-- Header + Nav -->
  <header class="site-header" aria-hidden="false">
    <div class="nav-left">
      <a class="nav-brand" href="#">
        <img src="Redleaf.jpeg" alt="Red Leaf Eatery logo thumbnail" />
        <span style="font-weight:700;letter-spacing:-0.01em;color:white">Red Leaf</span>
      </a>
    </div>

    <nav class="nav-actions" aria-label="Main navigation">
      <a class="btn btn--menu" href="#menu" style="padding:8px 12px;font-weight:600">Menu</a>
      <a class="btn btn--menu" href="#order" style="padding:8px 12px;font-weight:600">Order</a>
      <a class="btn btn--order" href="#cartPanel" style="padding:8px 12px;font-weight:700" onclick="scrollToCart(event)">Order Now</a>
    </nav>
  </header>

  <!-- HERO -->
  <main class="hero" id="root">
    <section class="hero__panel" role="region" aria-labelledby="hero-heading">
      <div style="padding:6px 8px;display:flex;flex-direction:column;align-items:center;">
        <div class="brand" aria-hidden="true">
          <div class="brand__logo" role="img" aria-label="Red leaf circular logo"></div>
          <div class="brand__title">
            <h1 id="hero-heading">Red Leaf Eatery</h1>
            <p>Local ingredients. Bright flavours. Warm welcome.</p>
          </div>
        </div>

        <p class="hero__headline" style="margin-top:10px;">
          Fresh plates. Quick bites. Eat with intention.
        </p>

        <p class="hero__sub">
          Open daily for breakfast, lunch and dinner. Cozy indoor seating with seasonal specials and a farm-fresh menu — crafted to delight.
        </p>

        <div class="cta-row" role="group" aria-label="Primary actions">
          <a href="#order" class="btn btn--order">Order Online</a>
          <a href="#menu" class="btn btn--menu">See Menu</a>
        </div>

        <div class="chips" aria-hidden="false">
          <span class="chip">Open: 10am — 10pm</span>
          <span class="chip">Delivery 11am — 9:30pm</span>
          <span class="chip"></span>
        </div>

        <div class="footer-note" aria-hidden="true" style="margin-top:12px;color:rgba(255,255,255,0.9);font-size:13px">Located in the heart of the neighborhood • Reservations recommended on weekends</div>
      </div>

      <aside style="padding:10px 8px; display:flex;flex-direction:column;align-items:center; gap:12px;">
        <div style="width:100%; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px; border-radius:12px;">
          <h3 style="margin-bottom:6px; font-size:18px; text-align:left">Reserve a Table</h3>
          <p style="margin-bottom:10px; color:rgba(255,255,255,0.9)">Book quickly for parties of 1–5.</p>
          <a class="btn btn--order" href="#reserve" style="width:100%; justify-content:center">Reserve Now</a>
        </div>

        <div style="width:100%; background:linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.12)); padding:14px; border-radius:12px;">
          <h4 style="margin-bottom:8px; text-align:left">Our Special</h4>
          <p style="margin-bottom:10px; font-weight:600">   Don </p>
          <a class="btn btn--menu" href="#menu" style="width:100%; justify-content:center">View Full Menu</a>
        </div>
      </aside>
    </section>
  </main>

  <!-- Page content wrapper -->
  <div class="page-wrap" aria-live="polite">
    <!-- Menu Section -->
    <section id="menu" style="scroll-margin-top:90px;">
      <div class="container" role="region" aria-label="Interactive menu">
        <!-- Sidebar -->
        <aside class="sidebar" aria-label="menu sidebar">
          <div class="logo">
            <img src="RL.jpeg" alt="RedLeaf logo" />
            <div>
              <div class="brand">RedLeaf Eatery</div>
              <div class="tel">Call: 98150-77985 • 97814-68978</div>
            </div>
          </div>

          <div class="search">
            <input id="search" placeholder="Search dishes or price..." />
          </div>

          <div style="margin-top:12px;font-weight:700;color:#444">Categories</div>
          <div class="cats" id="categories">
            <div class="cat active" data-cat="all">All</div>
            <div class="cat" data-cat="veg">Veg</div>
            <div class="cat" data-cat="nonveg">Non-Veg</div>
            <div class="cat" data-cat="snacks">Snacks</div>
            <div class="cat" data-cat="drinks">Drinks</div>
            <div class="cat" data-cat="specials">Specials</div>
          </div>

          <div style="margin-top:14px;color:black;font-size:13px">
            <strong>Note:</strong> Freshly made 
          </div>
        </aside>

        <!-- Main content -->
        <main class="main">
          <div class="hero-banner" role="img" aria-label="RedLeaf hero banner">
            <div>
              <div class="title">RedLeaf Eatery</div>
              <div style="font: size 20px;margin-top:6px">Tap an item to view sizes, combos & add to cart</div>
            </div>
          </div>

          <div class="controls" style="justify-content:space-between;align-items:center;">
            <div style="font-weight:700">Menu</div>
            <div style="display:flex;gap:8px;align-items:center ;">
              <button class="btn small" onclick="resetFilters()">Reset</button>
            </div>
          </div>

          <section>
            <div id="grid" class="grid" aria-live="polite"></div>
          </section>
        </main>
      </div>
    </section>

    <!-- Order / Checkout Section -->
    <section id="order" style="margin-top:28px; scroll-margin-top:90px;">
      <div style="max-width:1100px; margin: 0 auto; padding: 0 18px;">
        <div id="orderSpot">
          <h3>Your Order & Details</h3>
          <p style="color:#e4dcdc; margin-top:6px">Review cart, fill your details and place the order.</p>

          <div style="margin-top:12px;">
            <div id="orderCartSummary" style="margin-bottom:12px; color:#eee8e8">Cart summary appears on the right (or below on mobile).</div>
            <label for="custName">Name</label>
            <input id="custName" placeholder="Full name" />

            <label for="custPhone">Phone</label>
            <input id="custPhone" placeholder="Phone number" />

            <label for="custAddress">Address</label>
            <textarea id="custAddress" rows="3" placeholder="Delivery address / special instructions"></textarea>

            <div style="display:flex;gap:10px;margin-top:12px;align-items:center">
              <button class="btn btn--order" onclick="placeOrder()">Place Order</button>
              <button class="btn small" onclick="scrollToCart()">View Cart</button>
            </div>

            <div style="margin-top:10px;color:#f8f2f2;font-size:13px">
              Enjoy your Meal 
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Cart -->
  <aside class="cart" id="cartPanel" aria-label="cart">
    <h3>Cart</h3>
    <div class="cart-list" id="cartList">
      <div style="color:var(--muted-2)">Cart is empty — add items to begin</div>
    </div>
    <div class="checkout">
      <div class="total" id="cartTotal">₹0</div>
      <button class="btn btn--order" id="checkoutBtn" onclick="checkout()">Checkout</button>
    </div>
  </aside>

  <!-- Modal root -->
  <div id="modalRoot" style="display:none"></div>

  <script>
    
    const items = [
      /* Veg */
      { id: 'v1', cat:'veg', title:'Veg Farm Fresh Burger', priceVariants:{single:70}, img:'Veg Farm Fresh Burger.png', desc:'Veg burger with fresh veggies' },
      { id: 'v2', cat:'veg', title:'Red Regular Pizza (S/M/L)', priceVariants:{S:150,M:250,L:400}, img:'Red Regular Pizza.png', desc:'Onion, Tomato, Capsicum' },
      { id: 'v3', cat:'veg', title:'Margarita Pizza (S/M/L)', priceVariants:{S:160,M:260,L:410}, img:'Margarita Pizza.png', desc:'100% Mozzarella Cheese' },
      { id: 'v4', cat:'veg', title:'Paneer Makhani Pizza (S/M/L)', priceVariants:{S:240,M:360,L:500}, img:'Paneer Makhani Pizza.png', desc:'Paneer, Onion, Capsicum' },
      { id: 'v5', cat:'veg', title:'French Fries (Snack)', priceVariants:{single:70}, img:'French Fries.png', desc:'Small fries' },
      { id: 'v6', cat:'veg', title:'Paneer Strips (Snack)', priceVariants:{single:120}, img:'Paneer Strips.png', desc:'Crispy paneer strips' },

      /* Drinks */
      { id: 'd1', cat:'drinks', title:'Minty Mist(Kreshers)', priceVariants:{single:90}, img:'3.png', desc:'Refreshing drink' },
      { id: 'd2', cat:'drinks', title:'Vanilla Shake', priceVariants:{single:100}, img:'2.png', desc:'Creamy shake' },

      /* Pasta / Combos */
      { id: 'p1', cat:'veg', title:'White Sauce Pasta Veg', priceVariants:{single:170, combo:230}, img:'White Sauce Pasta Veg.png', desc:'Pasta with choice of sauce' },
      { id: 'p1', cat:'veg', title:'Red Sauce Pasta Veg', priceVariants:{single:170, combo:230}, img:'Red Sauce Pasta Veg.png', desc:'Pasta with choice of sauce' },
      { id: 'p2', cat:'veg', title:'Classic Single Combo', priceVariants:{single:120}, img:'1.png', desc:'Veg Red Burger + Veg Strips + 300ml coke' },

      /* Non-veg */
      { id: 'n1', cat:'nonveg', title:'Red Chicken Burger', priceVariants:{single:70, combo:130}, img:'page6.png', desc:'Chicken burger' },
      { id: 'n2', cat:'nonveg', title:'Spicy Chicken Pizza (S/M/L)', priceVariants:{S:180,M:310,L:550}, img:'page6.png', desc:'Onion, Tomato, Capsicum' },
      { id: 'n3', cat:'nonveg', title:'Tandoor Chicken Pizza (S/M/L)', priceVariants:{S:190,M:330,L:600}, img:'page6.png', desc:'Capsicum, Onion' },
      { id: 'n4', cat:'nonveg', title:'Crispy Chicken Bucket (12 pcs)', priceVariants:{single:900}, img:'page7.png', desc:'12 pc crispy chicken' },
      { id: 'n5', cat:'nonveg', title:'Korean Boneless Chicken Strip', priceVariants:{single:280, full:520}, img:'page8.png', desc:'Korean style spicy strips' },

      /* Specials */
      { id: 's1', cat:'specials', title:'Special Pizza Offer', priceVariants:{single:600}, img:'page2.png', desc:'Special pizza deal' },
      { id: 's2', cat:'specials', title:'Don Chicken Burger', priceVariants:{single:140}, img:'page2.png', desc:'Special Don chicken burger' },
    ];

    // state
    let shownCat = 'all';
    let cart = {}; // itemKey -> { item, size, qty, unitPrice }

    // DOM refs
    const grid = document.getElementById('grid');
    const categories = document.getElementById('categories');
    const searchEl = document.getElementById('search');
    const cartList = document.getElementById('cartList');
    const cartTotal = document.getElementById('cartTotal');
    const modalRoot = document.getElementById('modalRoot');
    const orderCartSummary = document.getElementById('orderCartSummary');

    function formatPrice(p){ return '₹' + Number(p).toFixed(0); }
    function getPriceForVariant(variants, choice){
      if(!choice) {
        if(variants.single) return variants.single;
        const keys = Object.keys(variants);
        return variants[keys[0]];
      }
      return variants[choice] ?? variants.single ?? Object.values(variants)[0];
    }
    function escapeHtml(s){ return (s||'').replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

    // render grid
    function renderGrid(){
      const q = searchEl.value.trim().toLowerCase();
      const filtered = items.filter(it => {
        if(shownCat !== 'all' && it.cat !== shownCat) return false;
        if(!q) return true;
        if(it.title.toLowerCase().includes(q)) return true;
        const priceStr = Object.values(it.priceVariants).join(' ').toLowerCase();
        if(priceStr.includes(q)) return true;
        return false;
      });

      grid.innerHTML = filtered.map(it => {
        const repPrice = getPriceForVariant(it.priceVariants);
        return `
          <article class="card" data-id="${it.id}">
            <img class="thumb" src="${it.img}" alt="${escapeHtml(it.title)}" />
            <div class="meta">
              <h4>${escapeHtml(it.title)}</h4>
              <p>${escapeHtml(it.desc || '')}</p>
              <div class="price-row">
                <div class="price">${formatPrice(repPrice)}</div>
                <button class="btn small" onclick="openItemModal('${it.id}')">Add</button>
                <button class="btn small" onclick="openItemModal('${it.id}', true)">Details</button>
              </div>
            </div>
          </article>
        `;
      }).join('') || '<div style="grid-column:1/-1;color:var(--muted-2)">No items found.</div>';
    }

    // categories
    categories.addEventListener('click', (e) => {
      const catEl = e.target.closest('.cat');
      if(!catEl) return;
      categories.querySelectorAll('.cat').forEach(c => c.classList.remove('active'));
      catEl.classList.add('active');
      shownCat = catEl.dataset.cat;
      renderGrid();
    });
    searchEl.addEventListener('input', renderGrid);
    function resetFilters(){ searchEl.value = ''; shownCat = 'all'; categories.querySelectorAll('.cat').forEach(c => c.classList.remove('active')); categories.querySelector('.cat[data-cat="all"]').classList.add('active'); renderGrid(); }

    // modal & add to cart
    function openItemModal(id, showDetails=false){
      const it = items.find(x=>x.id===id);
      if(!it) return;
      const variantKeys = Object.keys(it.priceVariants);
      let sizesHtml = variantKeys.length>1 ? variantKeys.map((k,i)=>`<button data-size="${k}" class="${i===0?'active':''}">${k} (${formatPrice(it.priceVariants[k])})</button>`).join('') : `<div style="font-size:14px;color:${'var(--muted-2)'}">Price: ${formatPrice(Object.values(it.priceVariants)[0])}</div>`;
      const content = `
        <div class="modal-backdrop" id="modalBackdrop">
          <div class="modal" role="dialog" aria-modal="true">
            <h3 style="margin:0">${escapeHtml(it.title)}</h3>
            <p style="margin:6px 0;color:var(--muted-2)">${escapeHtml(it.desc)}</p>
            <div style="display:flex;gap:12px;align-items:center">
              <img src="${it.img}" style="width:110px;height:80px;border-radius:8px;object-fit:cover" alt="${escapeHtml(it.title)}" />
              <div style="flex:1">
                <div style="margin-top:6px">Choose size / variant</div>
                <div class="sizes" id="sizeButtons">${sizesHtml}</div>
                <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
                  <label>Qty</label>
                  <input id="modalQty" type="number" min="1" value="1" style="width:64px;padding:6px;border-radius:6px;border:1px solid #e6e6e6" />
                </div>
              </div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <div style="font-weight:700" id="modalPrice">${formatPrice(getPriceForVariant(it.priceVariants, variantKeys[0]))}</div>
              <div>
                <button class="btn btn--order" id="addToCartBtn">Add to cart</button>
                <button class="btn small" id="closeModalBtn">Close</button>
              </div>
            </div>
            ${showDetails ? `<div style="margin-top:12px;color:var(--muted-2);font-size:13px">Detailed prices: ${Object.entries(it.priceVariants).map(([k,v])=>`${k}:${formatPrice(v)}`).join(' • ')}</div>` : ''}
          </div>
        </div>
      `;
      modalRoot.innerHTML = content;
      modalRoot.style.display = 'block';

      document.getElementById('modalBackdrop').addEventListener('click', (ev)=>{
        if(ev.target.id === 'modalBackdrop') closeModal();
      });
      document.getElementById('closeModalBtn').addEventListener('click', closeModal);
      const sizeButtons = Array.from(document.querySelectorAll('#sizeButtons button'));
      sizeButtons.forEach(b => b.addEventListener('click', ()=>{
        sizeButtons.forEach(bb=>bb.classList.remove('active'));
        b.classList.add('active');
        updateModalPrice(it);
      }));
      document.getElementById('modalQty').addEventListener('input', ()=>{
        if(Number(document.getElementById('modalQty').value) < 1) document.getElementById('modalQty').value = 1;
        updateModalPrice(it);
      });

      document.getElementById('addToCartBtn').addEventListener('click', ()=>{
        const chosen = document.querySelector('#sizeButtons button.active');
        const size = chosen ? chosen.dataset.size : null;
        const qty = Number(document.getElementById('modalQty').value||1);
        addToCart(it.id, size, qty);
        closeModal();
        scrollToCart();
      });

      updateModalPrice(it);
    }

    function updateModalPrice(it){
      const chosen = document.querySelector('#sizeButtons button.active');
      const size = chosen ? chosen.dataset.size : null;
      const qty = Number(document.getElementById('modalQty').value||1);
      const p = getPriceForVariant(it.priceVariants, size);
      document.getElementById('modalPrice').textContent = formatPrice(p * qty);
    }
    function closeModal(){ modalRoot.innerHTML = ''; modalRoot.style.display = 'none'; }

    function addToCart(itemId, size=null, qty=1){
      const it = items.find(x=>x.id===itemId);
      if(!it) return;
      const key = size ? itemId + '::' + size : itemId;
      const unitPrice = getPriceForVariant(it.priceVariants, size);
      if(cart[key]){
        cart[key].qty += qty;
      } else {
        cart[key] = { item: it, size, qty, unitPrice };
      }
      renderCart();
    }

    // cart rendering
    function renderCart(){
      const keys = Object.keys(cart);
      if(keys.length === 0){
        cartList.innerHTML = '<div style="color:var(--muted-2)">Cart is empty — add items to begin</div>';
        cartTotal.textContent = '₹0';
        orderCartSummary.textContent = 'Cart summary appears on the right (or below on mobile).';
        return;
      }
      cartList.innerHTML = keys.map(k=>{
        const row = cart[k];
        return `
          <div class="cart-item" data-key="${k}">
            <img src="${row.item.img}" alt="" />
            <div style="flex:1">
              <div style="font-weight:700">${escapeHtml(row.item.title)} ${row.size?'<span style="font-weight:normal;color:var(--muted-2)"> ('+row.size+')</span>':''}</div>
              <div style="font-size:13px;color:var(--muted-2)">${formatPrice(row.unitPrice)} × ${row.qty} = <strong>${formatPrice(row.unitPrice * row.qty)}</strong></div>
            </div>
            <div style="display:flex;flex-direction:column;gap:6px;align-items:center">
              <div class="qty">
                <button onclick="changeQty('${k}', -1)">-</button>
                <div style="min-width:24px;text-align:center">${row.qty}</div>
                <button onclick="changeQty('${k}', 1)">+</button>
              </div>
              <button style="background:none;border:none;color:#d33;cursor:pointer" onclick="removeFromCart('${k}')">Remove</button>
            </div>
          </div>
        `;
      }).join('');
      const tot = keys.reduce((s,k)=> s + cart[k].unitPrice * cart[k].qty, 0);
      cartTotal.textContent = formatPrice(tot);

      // update order summary text
      orderCartSummary.innerHTML = keys.map(k=>{
        const r = cart[k];
        return `${escapeHtml(r.item.title)}${r.size? ' ('+escapeHtml(r.size)+')':''} × ${r.qty} — ${formatPrice(r.unitPrice * r.qty)}`;
      }).join('<br>');
    }

    function changeQty(key, delta){
      if(!cart[key]) return;
      cart[key].qty += delta;
      if(cart[key].qty < 1) delete cart[key];
      renderCart();
    }
    function removeFromCart(key){
      delete cart[key];
      renderCart();
    }

    // checkout (demo)
    function checkout(){
      if(Object.keys(cart).length === 0){
        alert('Your cart is empty.');
        return;
      }
      const tot = Object.keys(cart).reduce((s,k)=> s + cart[k].unitPrice * cart[k].qty, 0);
      alert('Checkout — total: ' + formatPrice(tot) + '\n(This is a demo — integrate a payment flow for real orders.)');
      cart = {};
      renderCart();
    }

    // placeOrder from #order form (uses cart contents)
    function placeOrder(){
      const name = document.getElementById('custName').value.trim();
      const phone = document.getElementById('custPhone').value.trim();
      const address = document.getElementById('custAddress').value.trim();

      if(!name || !phone){
        alert('Please provide name and phone number to place the order.');
        return;
      }
      if(Object.keys(cart).length === 0){
        alert('Your cart is empty.');
        return;
      }

      const tot = Object.keys(cart).reduce((s,k)=> s + cart[k].unitPrice * cart[k].qty, 0);
      let orderText = `Order for ${name}\nPhone: ${phone}\nAddress: ${address || '—'}\n\nItems:\n`;
      Object.keys(cart).forEach(k=>{
        const r = cart[k];
        orderText += `• ${r.item.title}${r.size? ' ('+r.size+')':''} × ${r.qty} = ${formatPrice(r.unitPrice * r.qty)}\n`;
      });
      orderText += `\nTotal: ${formatPrice(tot)}\n\n(This is a demo — integrate a backend to accept orders.)`;

      // show summary to user (demo)
      alert(orderText);

      // clear cart & fields
      cart = {};
      renderCart();
      document.getElementById('custName').value = '';
      document.getElementById('custPhone').value = '';
      document.getElementById('custAddress').value = '';
      // optionally scroll to top or confirmation
      window.location.hash = '#menu';
    }

    // convenience: scroll to cart
    function scrollToCart(e){
      const el = document.getElementById('cartPanel');
      if(el){
        el.scrollIntoView({behavior:'smooth', block:'center'});
      }
      if(e && e.preventDefault) e.preventDefault();
    }

    // init
    renderGrid();
    renderCart();

    // expose for inline handlers
    window.openItemModal = openItemModal;
    window.resetFilters = resetFilters;
    window.changeQty = changeQty;
    window.removeFromCart = removeFromCart;
    window.checkout = checkout;
    window.placeOrder = placeOrder;
    window.scrollToCart = scrollToCart;

    // small keyboard accessibility for hero CTA buttons
    (function(){
      const btns = document.querySelectorAll('.btn');
      btns.forEach(btn => {
        btn.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            btn.click();
          }
        });
      });
    })();
  </script>
</body>
</html>
